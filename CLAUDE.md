# TaskMasterAI - AI生産性自動化アシスタント

継承: O:\Dev\CLAUDE.md → このファイル

## 🎯 プロジェクト概要

**TaskMasterAI**はAI駆動の仮想エグゼクティブアシスタント。単なるチャットボットではなく、ユーザー許可のもとで実際にアクションを実行する自動化ツール。

### コンセプト
- メール管理・要約・返信ドラフト作成
- カレンダー管理・自動スケジューリング
- タスク管理・リマインダー
- 定型業務の自動化（レポート作成、データ抽出等）

---

## 🔗 統合対象サービス

### Phase 1（初期実装）
| サービス | 用途 | API |
|----------|------|-----|
| Gmail | メール読取・要約・ドラフト作成 | Gmail API |
| Google Calendar | 空き時間検索・会議スケジュール | Calendar API |

### Phase 2（将来拡張）
- Outlook / Microsoft 365
- Slack（通知・ボット連携）
- Trello / Asana（タスク管理）
- Notion（ドキュメント連携）

### 認証要件
- OAuth 2.0によるユーザー認証
- API認証情報は環境変数または暗号化ファイルで管理
- ユーザー同意フローの実装必須

---

## 🛡️ 安全性ガイドライン

### 最重要原則
**AIは確認なしにメール送信・予定作成を行わない**

### 動作モード
| モード | 説明 | デフォルト |
|--------|------|-----------|
| Draft Mode | 下書き作成のみ、送信は手動 | ✅ 有効 |
| Confirmation Mode | アクション実行前に必ず確認 | ✅ 有効 |
| Auto Mode | 事前承認ルールに基づき自動実行 | ❌ 要明示的有効化 |

### 禁止事項
- ユーザー確認なしのメール送信
- ユーザー確認なしの予定変更・削除
- 機密情報の外部送信
- ログへの認証情報出力

### 監査ログ
全アクションをタイムスタンプ付きで記録し、ユーザーが確認可能に

---

## 🏗️ アーキテクチャ

### システム構成
```
┌─────────────────────────────────────────────────────┐
│                    CLI Interface                     │
│  "summarize inbox" / "schedule meeting" / "status"  │
└─────────────────────┬───────────────────────────────┘
                      │
┌─────────────────────▼───────────────────────────────┐
│              Central Coordinator                     │
│  - コマンド解析                                       │
│  - モジュール間調整                                   │
│  - 確認フロー管理                                     │
└──────┬─────────────────┬─────────────────┬──────────┘
       │                 │                 │
┌──────▼──────┐  ┌───────▼───────┐  ┌──────▼──────┐
│ Email Module │  │Calendar Module│  │ Task Module │
│ - 取得       │  │ - 空き検索    │  │ - 一覧取得  │
│ - 要約       │  │ - 予定作成    │  │ - 進捗管理  │
│ - ドラフト   │  │ - リマインダー │  │ - 自動化    │
└──────┬──────┘  └───────┬───────┘  └──────┬──────┘
       │                 │                 │
┌──────▼─────────────────▼─────────────────▼──────────┐
│                External APIs                         │
│  Gmail API / Calendar API / Slack API / etc.        │
└─────────────────────────────────────────────────────┘
```

### モジュール詳細

#### Email Module (`src/email_bot.py`)
- Gmail API経由でメッセージ取得
- LLMによるスレッド要約
- 返信ドラフト生成（送信はDraft Modeで保存のみ）

#### Calendar Module (`src/scheduler.py`)
- Google Calendar APIでカレンダー取得
- 参加者のfree/busy情報から空き時間算出
- 会議招待ドラフト作成

#### Central Coordinator (`src/coordinator.py`)
- ユーザーコマンドの受付・解析
- 各モジュールへのタスク振り分け
- 確認フローの管理

---

## 💰 収益化戦略

### サブスクリプションモデル

| プラン | 価格 | 機能 |
|--------|------|------|
| **Personal** | $10/月 | 1アカウント連携、メール要約、基本スケジューリング |
| **Pro** | $25/月 | 複数アカウント、高度な自動化、優先サポート |
| **Team** | $15/月/人 | チーム調整機能、共有受信箱管理、管理者ダッシュボード |
| **Enterprise** | 個別見積 | オンプレミス、カスタム統合、SLA保証 |

### 価値提案
- **時間節約**: 週平均5-10時間のルーチンワーク削減
- **ミス防止**: ダブルブッキング・返信漏れの防止
- **ROI**: $10/月で週5時間節約 = 時給換算で大幅な投資対効果

### 無料枠
- メール要約: 月50通まで
- スケジュール提案: 月10回まで
- 自動実行: なし（確認モードのみ）

### 収益予測メトリクス
- 月間アクティブユーザー数
- アクション実行回数
- 節約時間（"X時間節約"表示でユーザーへの価値可視化）

---

## 📋 開発計画

### Phase 1: 基盤構築
1. [x] プロジェクト構造作成
2. [ ] Gmail API連携・メール取得実装
3. [ ] LLMによるメール要約機能
4. [ ] CLIインターフェース基本実装

### Phase 2: カレンダー機能
5. [ ] Google Calendar API連携
6. [ ] 空き時間検索アルゴリズム
7. [ ] 会議スケジュール提案機能
8. [ ] 確認フロー実装

### Phase 3: 統合・改善
9. [ ] 複数サービス統合
10. [ ] 自然言語コマンド解析
11. [ ] ユーザー設定・プリファレンス
12. [ ] 監査ログ・ダッシュボード

### Phase 4: 製品化
13. [ ] ユーザー認証・課金システム
14. [ ] Web UI（オプション）
15. [ ] ドキュメント・チュートリアル
16. [ ] ベータテスト・フィードバック

---

## 🔧 技術スタック

```
Python 3.11+
├── google-api-python-client  # Google API連携
├── google-auth-oauthlib      # OAuth認証
├── openai / anthropic        # LLM API
├── click / typer             # CLI構築
├── pydantic                  # データバリデーション
├── pytest                    # テスト
└── python-dotenv             # 環境変数管理
```

---

## 📁 ディレクトリ構成

```
TaskMasterAI/
├── CLAUDE.md              # このファイル
├── README.md              # ユーザー向けドキュメント
├── .claude/
│   └── settings.json      # Claude Code設定
├── src/
│   ├── __init__.py
│   ├── email_bot.py       # メール処理モジュール
│   ├── scheduler.py       # カレンダー処理モジュール
│   ├── coordinator.py     # 中央調整モジュール
│   └── cli.py             # CLIエントリーポイント
├── config/
│   ├── .env.example       # 環境変数テンプレート
│   └── credentials/       # OAuth認証情報（gitignore）
├── tests/
│   ├── test_email_bot.py
│   ├── test_scheduler.py
│   └── fixtures/          # テスト用サンプルデータ
└── docs/
    └── setup_google_api.md  # Google API設定ガイド
```

---

## ⚠️ 開発ルール

### コード品質
- 型ヒント必須（mypy通過）
- docstring記述（日本語可）
- テストカバレッジ80%以上目標

### セキュリティ
- 認証情報はgitignore
- 機密データのログ出力禁止
- 入力値のバリデーション必須

### 確認フロー
外部アクション（メール送信・予定作成）は必ず:
1. アクション内容をユーザーに提示
2. 明示的な承認を取得
3. 実行結果をログ記録

---

## 📝 セッション記録

作業履歴は `.claude/DEVELOPMENT_LOG.md` に記録
