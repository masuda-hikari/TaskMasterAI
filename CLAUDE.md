﻿﻿﻿﻿﻿﻿﻿﻿﻿﻿﻿﻿﻿﻿﻿﻿﻿<!-- GOVERNANCE:BEGIN -->
<!--
  このセクションはオーケストレーターによって管理されています。
  手動編集は次回同期時に上書きされます。
  プロジェクト固有の内容は LOCAL セクションに記載してください。
-->

# プロジェクトガバナンス（継承）

継承: O:\Dev\CLAUDE.md → O:\Dev\Work\_orchestrator\CLAUDE.md → このファイル

## 開発要件（継承）

### 言語設定
**日本語一律使用**: 必須（コメント/commit全て日本語）

### 基本原則
- 抽象化: 共通処理100%/2箇所使用→即共通化/DRY
- 資源活用: 既存確認必須/改良優先

### 禁止事項
- 未テストコミット
- 認証情報ハードコード
- 脆弱性導入
- UTF-8以外のエンコーディング

## ミッション
**AIによる人間代替作業の実行と収益化**

## セッション終了時必須作業
1. 作業記録: logs/claude_runs に保存
2. Git Push: 全変更をコミット＆プッシュ
3. 次回引継ぎ: 未完了タスク・課題を明記

## Orchestrator統制
- logs/claude_runs にログ保存必須
- STATUS.md を最新状態に維持
- 失敗時は failure_classification を設定

<!-- GOVERNANCE:END -->

<!-- LOCAL:BEGIN -->
<!--
  このセクションはプロジェクト固有の内容です。
  オーケストレーター同期時も保持されます。
-->

# TaskMasterAI - プロジェクト固有設定

---

## 開発ローカル要件

### コード品質
- 型ヒント: 全public関数に必須
- テストカバレッジ: 80%+
- 静的解析: 必ず通過

### API設計
- RESTful原則遵守
- エラーレスポンス標準化
- 認証/認可の適切な実装

---

## ミッション

**AIによる人間代替作業の実行と収益化**

本プロジェクトのAIは**プロフェッショナル**として以下を遵守する：
- 収益を得るに相応しい品質の成果物を提供
- 誠実かつ妥協を許さない姿勢
- 批判的視点で自らの成果物を検証・改善

**収益モデル**: SaaS・チップ課金

---

## 🎯 プロジェクト概要

**TaskMasterAI**はAI駆動の仮想エグゼクティブアシスタント。単なるチャットボットではなく、ユーザー許可のもとで実際にアクションを実行する自動化ツール。

### コンセプト
- メール管理: 要約・返信ドラフト作成
- カレンダー管理: 自動スケジューリング
- タスク管理: リマインダー
- 定型業務の自動化（レポート作成、データ抽出等）

---

## 🔌 統合対象サービス

### Phase 1（優先実装）

| サービス | 用途 | API |
|----------|------|-----|
| Gmail | メール読取・要約・ドラフト作成 | Gmail API |
| Google Calendar | 空き時間検索・会議スケジュール | Calendar API |

### Phase 2（将来拡張）
- Outlook / Microsoft 365
- Slack（通知・ボット連携）
- Trello / Asana（タスク管理）
- Notion（ドキュメント連携）

### 認証要件
- OAuth 2.0によるユーザー認証
- API認証情報は環境変数または暗号化ファイルで管理
- ユーザー同意フローの実装必須

---

## 🔒 安全性ガイドライン

### 最重要原則
**AIは確認なしにメール送信・予定作成を行わない**

### 動作モード

| モード | 説明 | デフォルト |
|--------|------|-----------|
| Draft Mode | 下書き作成のみ、送信は手動 | ✅ 有効 |
| Confirmation Mode | アクション実行前に必ず確認 | ✅ 有効 |
| Auto Mode | 事前承認ルールに基づく自動実行 | ❌ 要明示的有効化 |

### 禁止事項
- ユーザー確認なしのメール送信
- ユーザー確認なしの予定変更・削除
- 機密情報の外部送信
- ログへの認証情報出力

### 監査ログ
全アクションをタイムスタンプ付きで記録し、ユーザーが確認可能に

---

## 🏗️ アーキテクチャ

### システム構成
```
┌─────────────────────────────────────────────────────────┐
│                   CLI Interface                         │
│ "summarize inbox" / "schedule meeting" / "status"       │
└─────────────────────────┬───────────────────────────────┘
                          │
┌─────────────────────────┴───────────────────────────────┐
│             Central Coordinator                         │
│ - コマンド解析                                          │
│ - モジュール間調整                                      │
│ - 確認フロー管理                                        │
└──────┬──────────────────┬──────────────────┬───────────┘
       │                  │                  │
┌──────┴──────┐ ┌─────────┴────────┐ ┌──────┴──────┐
│Email Module │ │Calendar Module   │ │Task Module  │
│- 取得       │ │- 空き検索        │ │- 一覧取得   │
│- 要約       │ │- 予定作成        │ │- 進捗管理   │
│- ドラフト   │ │- リマインダー    │ │- 自動化     │
└──────┬──────┘ └────────┬────────┘ └──────┬──────┘
       │                  │                  │
┌──────┴──────────────────┴──────────────────┴───────────┐
│               External APIs                             │
│ Gmail API / Calendar API / Slack API / etc.             │
└─────────────────────────────────────────────────────────┘
```

### モジュール詳細

#### Email Module (`src/email_bot.py`)
- Gmail API経由でメッセージ取得
- LLMによるスレッド要約
- 返信ドラフト生成（送信はDraft Modeで保存のみ）

#### Calendar Module (`src/scheduler.py`)
- Google Calendar APIでカレンダー取得
- 参加者のfree/busy情報から空き時間検索
- 会議提案ドラフト作成

#### Central Coordinator (`src/coordinator.py`)
- ユーザーコマンドの受付・解析
- 各モジュールへのタスク振り分け
- 確認フローの管理

---

## 💰 収益化戦略

### サブスクリプションモデル

| プラン | 価格 | 機能 |
|--------|------|------|
| **Personal** | $10/月 | 1アカウント連携、メール要約、基本スケジューリング |
| **Pro** | $25/月 | 複数アカウント、高度な自動化、優先サポート |
| **Team** | $15/月/人 | チーム調整機能、共有受信箱管理、管理ダッシュボード |
| **Enterprise** | 個別要相談 | オンプレミス、カスタム統合、SLA保証 |

### 価値提案
- **時間節約**: 週平均5-10時間のルーチンワーク削減
- **ミス防止**: ダブルブッキング・返信漏れの防止
- **ROI**: $10/月で週5時間節約 = 時給換算で大きな投資対効果

### 無料枠
- メール要約: 月50通まで
- スケジュール提案: 月10回まで
- 自動実行: なし（確認モードのみ）

### 収益予測メトリクス
- 月間アクティブユーザー数
- アクション実行回数
- 節約時間（X時間節約表示でユーザーへの価値可視化）

---

## 📋 開発計画

### Phase 1: 基盤構築
1. [x] プロジェクト構造作成
2. [ ] Gmail API連携・メール取得実装
3. [ ] LLMによるメール要約機能
4. [ ] CLIインターフェース基本実装

### Phase 2: カレンダー機能
5. [ ] Google Calendar API連携
6. [ ] 空き時間検索アルゴリズム
7. [ ] 会議スケジュール提案実装
8. [ ] 確認フロー実装

### Phase 3: 統合・改善
9. [ ] 複数サービス統合
10. [ ] 自然言語コマンド解析
11. [ ] ユーザー設定・プリファレンス
12. [ ] 監査ログ・ダッシュボード

### Phase 4: 商品化
13. [ ] ユーザー認証・課金システム
14. [ ] Web UI（オプション）
15. [ ] ドキュメント・チュートリアル
16. [ ] ベータテスト・フィードバック

---

## 🛠️ 技術スタック

```
Python 3.11+
├── google-api-python-client  # Google API連携
├── google-auth-oauthlib      # OAuth認証
├── openai / anthropic        # LLM API
├── click / typer             # CLI構築
├── pydantic                  # データバリデーション
├── pytest                    # テスト
└── python-dotenv             # 環境変数管理
```

---

## 📂 ディレクトリ構造

```
TaskMasterAI/
├── CLAUDE.md              # このファイル
├── README.md              # ユーザー向けドキュメント
├── .claude/
│   └── settings.json      # Claude Code設定
├── src/
│   ├── __init__.py
│   ├── email_bot.py       # メール処理モジュール
│   ├── scheduler.py       # カレンダー処理モジュール
│   ├── coordinator.py     # 中央調整モジュール
│   └── cli.py             # CLIエントリーポイント
├── config/
│   ├── .env.example       # 環境変数テンプレート
│   └── credentials/       # OAuth認証情報（gitignore）
├── tests/
│   ├── test_email_bot.py
│   ├── test_scheduler.py
│   └── fixtures/          # テスト用サンプルデータ
└── docs/
    └── setup_google_api.md  # Google API設定ガイド
```

---

## 📝 開発ルール

### コード品質
- 型ヒント必須（mypy通過）
- docstring記載（日本語可）
- テストカバレッジ80%以上目標

### セキュリティ
- 認証情報はgitignore
- 機密データのログ出力禁止
- 入力値のバリデーション必須

### 確認フロー
外部アクション（メール送信・予定作成）は必ず:
1. アクション内容をユーザーに提示
2. 明示的な承認を取得
3. 実行結果をログ記録

---

## 📜 セッション記録

作業履歴は `.claude/DEVELOPMENT_LOG.md` に記録

---

## セッション終了時の必須作業

**CRITICAL**: 作業終了前に必ず実行
1. **作業記録**: 変更内容を簡潔に記録（冗長禁止）
2. **Git Push**: 全変更をコミット＆プッシュ
3. **次回引継ぎ**: 未完了タスク・課題を明記

---

## セッション開始チェックリスト
- [ ] このCLAUDE.mdを確認
- [ ] `.claude/CORRECTION_ORDER.md`の有無確認（あれば最優先対応）
- [ ] `.claude/SESSION_REPORT.md`で前回の状態確認
- [ ] README.mdで現状把握
- [ ] 作業計画をTodoWriteで作成

---

## Orchestrator統制（CRITICAL）

### 強制レポート制度

本プロジェクトはOrchestratorの統制下にあり、以下を遵守する：

#### セッション終了時の必須更新
1. **SESSION_REPORT.md**（`.claude/SESSION_REPORT.md`）
   - 収益化進捗の記録
   - 今回の作業内容と収益貢献度
   - 次回推奨アクション
   - 自己評価

2. **REVENUE_METRICS.md**（`.claude/REVENUE_METRICS.md`）
   - 収益状況に変更があれば更新
   - ロードマップ進捗の更新

#### 運営是正指示への対応
- `.claude/CORRECTION_ORDER.md`が存在する場合は**最優先で対応**
- 対応完了後、ファイルを削除しセッションレポートに記録

### 収益化優先順位

| 優先度 | 作業種別 | 例 |
|--------|----------|-----|
| 1（最高） | 直接収益 | 課金実装、販売ページ |
| 2 | 収益準備 | MVP完成、ベータ版 |
| 3 | 収益基盤 | コア機能、品質向上 |
| 4 | 収益間接 | ドキュメント、テスト |
| 5（最低） | 非収益 | リファクタリングのみ |

**ルール**: 優先度5の作業は収益化完了まで原則禁止

### 逸脱の自己申告
収益化から外れる作業を行う場合：
1. 理由をSESSION_REPORT.mdに記録
2. 収益化への影響を説明
3. 代替案または復帰計画を提示

---

## AI行動原則

### 自律的貢献の姿勢
AIは指示待ちではなく、自ら考え、最善を尽くす。

| 原則 | 行動 |
|------|------|
| **自己駆動** | 指示がなくても必要な作業を自ら発見し提案 |
| **完遂責任** | 途中で止めない。完了まで責任を持つ |
| **品質追求** | 「動けばいい」ではなく「収益に値する品質」を追求 |
| **批判的思考** | 自分の成果物を厳しく評価し、弱点を見つける |
| **透明性** | 不明点・懸念点は隠さず明示する |

### 怠惰・言訳の禁止

以下は**絶対禁止**：
- 「後でやる」と言って放置
- 「簡単化のため省略」と言って必要な処理をスキップ
- 「時間がないので」と言って品質を落とす
- 確認せずに推測で進める
- エラーを見なかったことにする

---

## 自己監査基準
プロフェッショナルとして、成果物提出前に以下を自問：

| 観点 | チェック |
|------|---------|
| 収益価値 | この成果物に対価を払う価値があるか？ |
| 品質 | 妥協した実装はないか？ |
| 誠実性 | 不明点を曖昧にしていないか？ |
| 完全性 | 明示された要件を満たしているか？ |
| 継続性 | 次のセッションで引き継げる状態か？ |

**一つでもNoなら、提出前に改善すること**

---

## 更新履歴

| 日付 | 内容 |
|------|------|
| 2026-01-05 | Orchestrator共通要件を追加 |
| 2026-01-05 | O:\Dev\CLAUDE.md継承要件を追加 |
| 2026-01-06 | AI行動原則・怠惰禁止・継続性観点を追加 |
| 2026-01-06 | Orchestrator統制要件を追加 |

<!-- LOCAL:END -->

<!--
Orchestrator管理タグ（編集禁止）
TEMPLATE_VERSION: 2.0
LAST_SYNC: 2026-01-07
ORCHESTRATOR_MANAGED: true
-->
